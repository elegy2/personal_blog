---
import '../styles/global.css';
import BaseLayout from '../layouts/BaseLayout.astro';
import Greeting from '../components/Greeting';
import Sakura from '../components/Sakura.jsx'

// å¯¼å…¥ Markdown æ–‡æ¡£
const allPosts = import.meta.glob('../pages/posts/*.md', { eager: true });
const posts = Object.values(allPosts)
  .map(post => post.frontmatter)
  .sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

const pageTitle = "elegyåšå®¢ âœ¨";
---
<BaseLayout pageTitle={pageTitle}>
  <Greeting client:load messages={["Chiallo", "Hallo", "ä½ å¥½", "ã“ã‚“ã«ã¡ã¯","Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²Ñ‹Ğ¹Ñ‚Ğµ","ì•ˆë…•í•˜ì„¸ìš”"]} />

  <!-- åšå®¢ç®€ä»‹ -->
  <section class="fade-in" style="animation-delay: 0.2s;">
    <p>
      è¯¥åšå®¢ä¸»è¦åˆ†äº« <strong>è®¡ç®—æœºä¸“ä¸šç›¸å…³å†…å®¹</strong>ï¼ŒåŒ…æ‹¬ï¼š
    </p>
    <ul class="highlight-list">
      <li>ğŸ† ç«èµ›é¡¹ç›®ç»éªŒ</li>
      <li>ğŸ’¼ å®ä¹ ç»å†</li>
      <li>ğŸ“ ä¿ç ”ä¸ç•™å­¦ç›¸å…³ç»éªŒ</li>
      <li>ğŸ“š è¯¾ç¨‹å­¦ä¹ å¿ƒå¾—ä¸å­¦ä¹ æŠ€å·§</li>
      <li>ğŸ¯ å¤§å­¦å¸¸è§çš„ä¸€äº›æ³¨æ„äº‹é¡¹</li>
    </ul>

    <p>å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œå¸Œæœ›èƒ½ follow æˆ‘çš„ <strong>GitHub</strong>ï¼ŒçœŸçš„å¾ˆé‡è¦ï¼æ‹œæ‰˜äº† orz</p>

    <p>
      å¦å¤–ï¼Œåšå®¢è®¾æœ‰ <strong>æ ‘æ´ç¯èŠ‚</strong>ï¼ŒåŒå­¦ä»¬å¯è‡ªç”±æŠ•ç¨¿æˆ–æé—®ã€‚
      æŠ•ç¨¿/æé—®è¯·è”ç³»ï¼š
      <a href="mailto:3393205446@qq.com" class="highlight-contact">3393205446@qq.com</a>
    </p>
  </section>

  <!-- æœ€æ–°æ–‡ç« è‡ªåŠ¨æ»šåŠ¨åˆ—è¡¨ -->
  <section class="blog-section latest-posts fade-in" style="animation-delay: 0.2s;">
    <h3>ğŸ“° æœ€æ–°æ–‡ç« </h3>
    <div class="scroll-wrapper">
      <div class="scroll-content">
        {posts.map(post => (
          <div class="scroll-item">
            <span class="bullet">â­</span>
            <a href={post.url}>{post.title}</a>
          </div>
        ))}
        {/* å¤åˆ¶ä¸€ä»½ï¼Œå®ç°æ— é™å¾ªç¯ */}
        {posts.map(post => (
          <div class="scroll-item">
            <span class="bullet">â­</span>
            <a href={post.url}>{post.title}</a>
          </div>
        ))}
      </div>
    </div>
  </section>

  <Sakura client:only="preact" count={30} />

  <!-- é¦–é¡µé¡µé¢ä¸“ç”¨æ ·å¼ -->
  <style>
    /* åŠé€æ˜åŠ¨æ€èƒŒæ™¯ */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: url('/photos/index_bg.jpg');
      background-size: cover;
      background-position: center;
      opacity: 0.6;
      z-index: -1;
      filter: blur(2px);
      transform: scale(1.02);
    }

    /* å‘å…‰æ ‡é¢˜ */
    .glow-title {
      color: #000;
      text-shadow: 0 0 10px #69c3ffff, 0 0 20px #ff1493, 0 0 30px #ff69b4;
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    /* åšå®¢ç®€ä»‹åˆ—è¡¨æ ·å¼ */
    .highlight-list li {
      margin-bottom: 0.6em;
      position: relative;
      padding-left: 1.5em;
      color: #333;
      font-weight: 500;
    }
    .highlight-list li::before {
      content: "âœ¨";
      position: absolute;
      left: 0;
      top: 0;
    }

    /* æ®µè½ä¸åˆ—è¡¨åŸºç¡€æ ·å¼ */
    p { line-height: 1.7; margin-bottom: 1em; }
    ul { padding-left: 1.5em; margin-bottom: 1em; }
    li { margin-bottom: 0.5em; }

    /* è”ç³»æ–¹å¼é«˜äº® */
    .highlight-contact {
      color: #ff69b4;
      font-weight: bold;
      text-decoration: underline;
    }

    /* æœ€æ–°æ–‡ç« æ»šåŠ¨å®¹å™¨ */
    .latest-posts {
      margin: 2rem 0;
      border-top: 1px solid transparent;
      border-bottom: 1px solid transparent;
      background: transparent; /* å®Œå…¨é€æ˜ */
      padding: 0.1rem 0;
    }
    .latest-posts .scroll-wrapper {
      overflow: hidden;
      width: 100%;
    }
    .latest-posts .scroll-content {
      display: flex;
      gap: 2rem;
      white-space: nowrap;
      animation: scroll-left 20s linear infinite;
    }
    .latest-posts .scroll-item {
      display: flex;
      align-items: center;
      flex-shrink: 0;
      font-weight: 500;
    }
    .latest-posts .bullet {
      display: inline-block;
      margin-right: 0.5rem;
      animation: bounce 1.5s infinite;
    }

    /* å°å›¾æ ‡è·³åŠ¨åŠ¨ç”» */
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    /* è·‘é©¬ç¯æ¨ªå‘æ»šåŠ¨åŠ¨ç”» */
    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* æ–‡ç« é“¾æ¥æ ·å¼ */
    .latest-posts a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }
    .latest-posts a:hover {
      text-decoration: underline;
      color: #ff69b4;
    }
  </style>
</BaseLayout>